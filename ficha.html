<script type="module">
  import { db, storage } from './firebase-config.js';
  import { ref, get } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";
  import { ref as storageRef, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js";

  const params = new URLSearchParams(window.location.search);
  const id = params.get("id");

  async function carregarFicha() {
    const membroSnap = await get(ref(db, `membros/${id}`));
    const membro = membroSnap.val();
    if (!membro) return alert("Membro n√£o encontrado");

    document.getElementById("nome").textContent = membro.nome;
    document.getElementById("endereco").textContent = membro.endereco;
    document.getElementById("batismo").textContent = membro.batismo;
    document.getElementById("funcao").textContent = membro.funcao;

    const fotoRef = storageRef(storage, `fotos/${id}`);
    const fotoURL = await getDownloadURL(fotoRef);
    document.getElementById("foto").src = fotoURL;
  }

  carregarFicha();
</script>
